{% extends 'admin_base.html' %}
{% load static %}
{% block content %}


</aside>
<!-- Main content -->
<main class="flex-1 flex flex-col">
  <!-- Messages display -->
  {% if messages %}
  <div class="px-6 py-3">
      {% for message in messages %}
      <p class="{% if message.tags == 'error' %}bg-red-100 text-red-700{% else %}bg-green-100 text-green-700{% endif %} text-sm p-3 rounded mb-4" id="message">
          {{ message }}
      </p>
      {% endfor %}
  </div>
  {% endif %}
 <!-- Header -->
 <header class="border-b border-gray-300 shadow-md px-6 py-3 flex items-center">
  <h1 class="text-[#4a7a81] font-semibold text-lg">
   Welcome user !
  </h1>
 </header>
 <!-- Content -->
 <section class="flex-1 overflow-auto px-6 py-10">
  <h2 class="text-[#4a7a81] font-semibold text-2xl text-center mb-10 capitalize">
   category management
  </h2>
  <form class="max-w-xl mx-auto flex flex-col gap-6" method="post" enctype="multipart/form-data">
    {% csrf_token %}
   <div class="text-center font-semibold text-base">
    Add category
   </div>
   <div class="flex flex-col gap-1">
    <label class="text-sm font-normal" for="categoryName">
     Enter category name
    </label>
    <input class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#4a7a81]" 
           name="name" 
           id="categoryName" 
           type="text"
           value="{{ submitted_name }}"/>
    {% if errors.name %}
      <p class="text-red-500 text-xs mt-1">{{ errors.name }}</p>
    {% endif %}
   </div>
   <div class="flex flex-col gap-1">
    <label class="text-sm font-normal" for="categoryImage">
     Add category image
    </label>
    <div class="relative">
     <label class="cursor-pointer border border-gray-300 rounded-lg p-8 flex justify-center items-center absolute top-0 left-0 w-full h-full" for="categoryImage">
      <i class="fas fa-upload text-3xl text-gray-600">
      </i>
     </label>
     <input accept="image/*" class="hidden" name="image" id="categoryImage" type="file" 
            onchange="document.getElementById('categoryImagePreview').src = window.URL.createObjectURL(this.files[0])"/>
     <img id="categoryImagePreview" class="h-48 w-auto mx-auto" src="{% static 'images/Group 225.png' %}" alt=""/>
     {% if errors.image %}
      <p class="text-red-500 text-xs mt-1">{{ errors.image }}</p>
     {% endif %}
    </div>
   </div>
   <button class="bg-[#4a7a81] text-black rounded-lg py-3 px-10 mx-auto block" type="submit">
    Save
   </button>
  </form>
  
  {% if categories %}
  <div class="max-w-4xl mx-auto mt-16">
   <div class="text-center font-semibold text-base mb-4">
    category List
   </div>
   <table class="w-full border border-gray-300 rounded-lg border-collapse">
    <thead>
     <tr class="text-left text-sm font-normal border-b border-gray-300">
      <th class="py-3 px-4">
       Sl
      </th>
      <th class="py-3 px-4">
       category name
      </th>
      <th class="py-3 px-4">
       category image
      </th>
      <th class="py-3 px-4">
       Action
      </th>
     </tr>
    </thead>
    <tbody>
        {% for categorie in categories %}
     <tr class="border-b border-gray-300 text-sm font-normal">
      <td class="py-4 px-4 align-middle">
       {{ forloop.counter }}
      </td>
      <td class="py-4 px-4 align-middle">
       {{ categorie.name }}
      </td>
      <td class="py-4 px-4 align-middle text-center">
       <img alt="Electronic product image showing a small appliance" class="inline-block" height="50" src="{{ categorie.image.url }}" width="50"/>
      </td>
      <td class="py-4 px-4 align-middle flex gap-4">
        <a href="{% url 'edit_category' categorie.id %}" class="bg-[#4a7a81] text-black text-xs rounded-full px-4 py-1">
          Edit
        </a>
        <a href="{% url 'delete_category' categorie.id %}" class="bg-red-600 text-white text-xs rounded-full px-3 py-1 self-center">
         Delete
        </a>
      </td>
     </tr>
        {% endfor %}
    </tbody>
   </table>
  </div>
  {% endif %}
 </section>
</main>
</div>
{% endblock %}
